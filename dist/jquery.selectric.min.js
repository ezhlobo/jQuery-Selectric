/*! Selectric ÏŸ v1.8.5 (2014-12-26) - git.io/tjl9sQ - Copyright (c) 2014 Leonardo Santos - Dual licensed: MIT/GPL */
!function(e){"use strict";var t="selectric",s="Input Items Open Disabled TempShow HideSelect Wrapper Hover Responsive Above Scroll",o=".sl",i={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!0,openOnHover:!1,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,customClass:{prefix:t,postfixes:s,camelCase:!0},optionsTextBuilder:"{text}",optionsItemBuilder:"{text}"},n={add:function(e,t,s){this[e]||(this[e]={}),this[e][t]=s},remove:function(e,t){delete this[e][t]}},a={replaceDiacritics:function(e){for(var t="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" "),s=t.length;s--;)e=e.toLowerCase().replace(RegExp("["+t[s]+"]","g"),"aeiouncy".charAt(s));return e},format:function(e){var t=arguments;return(""+e).replace(/{(\d+|(\w+))}/g,function(e,s,o){return o&&t[1]?t[1][o]:t[s]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(s,o){var i=o.element,l=o.options["on"+s];e.isFunction(l)&&l.call(i,i,o),n[s]&&e.each(n[s],function(){this.call(i,i,o)}),e(i).trigger(t+"-"+a.toDash(s),o)}},l=e(document),r=e(window),c=function(n,c){function d(t){if($.options=e.extend(!0,{},i,$.options,t),$.classes={},$.element=n,a.triggerCallback("BeforeInit",$),$.options.disableOnMobile&&j)return $.disableOnMobile=!0,void 0;x(!0);var o=$.options.customClass,l=o.postfixes.split(" "),r=F.width();e.each(s.split(" "),function(e,t){var s=o.prefix+l[e];$.classes[t.toLowerCase()]=o.camelCase?s:a.toDash(s)}),C=e("<input/>",{"class":$.classes.input,readonly:j}),k=e("<div/>",{"class":$.classes.items,tabindex:-1}),T=e("<div/>",{"class":$.classes.scroll}),D=e("<div/>",{"class":o.prefix,html:$.options.arrowButtonMarkup}),y=e('<p class="label"/>'),I=F.wrap("<div>").parent().append(D.prepend(y),k,C),A={open:v,close:g,destroy:x,refresh:u,init:d},F.on(A).wrap('<div class="'+$.classes.hideselect+'">'),e.extend($,A),$.options.inheritOriginalWidth&&r>0&&I.width(r),p()}function p(){$.items=[];var s=F.children(),i="<ul>",n=s.filter(":selected").index(),l=$.options.optionsTextBuilder;if(S=B=~n?n:0,E=s.length){s.each(function(t){{var s=e(this),o=s.html(),n=s.prop("disabled");$.options.optionsItemBuilder}$.items[t]={value:s.val(),text:o,slug:a.replaceDiacritics(o),disabled:n},i+=a.format('<li class="{1}">{2}</li>',e.trim([t==S?"selected":"",t==E-1?"last":"",n?"disabled":""].join(" ")),e.isFunction(l)?l($.items[t].text):a.format(l,$.items[t]))}),k.append(T.html(i+"</ul>"));var r=$.items[S].text;r=a.format("{1}",e.isFunction(l)?l(r):a.format(l,r)),y.html(r)}D.add(F).add(I).add(C).off(o),I.prop("class",[$.classes.wrapper,F.prop("class").replace(/\S+/g,t+"-$&"),$.options.responsive?$.classes.responsive:""].join(" ")),F.prop("disabled")?(I.addClass($.classes.disabled),C.prop("disabled",!0)):(Y=!0,I.removeClass($.classes.disabled).on("mouseenter"+o+" mouseleave"+o,function(t){e(this).toggleClass($.classes.hover),$.options.openOnHover&&(clearTimeout($.closeTimer),"mouseleave"==t.type?$.closeTimer=setTimeout(g,500):v())}),D.on("click"+o,function(e){R?g():v(e)}),C.prop({tabindex:L,disabled:!1}).on("keypress"+o,h).on("keydown"+o,function(e){h(e),clearTimeout($.resetStr),$.resetStr=setTimeout(function(){C.val("")},$.options.keySearchTimeout);var t=e.keyCode||e.which;t>36&&41>t&&b(a[(39>t?"previous":"next")+"EnabledItem"]($.items,B))}).on("focusin"+o,function(e){C.one("blur",function(){C.blur()}),R||v(e)}).on("oninput"in C[0]?"input":"keyup",function(){C.val().length&&e.each($.items,function(e,t){return RegExp("^"+C.val(),"i").test(t.slug)&&!t.disabled?(b(e),!1):void 0})}),F.prop("tabindex",!1),O=e("li",k.removeAttr("style")).click(function(){return b(e(this).index(),!0),!1})),a.triggerCallback("Init",$)}function u(){a.triggerCallback("Refresh",$),p()}function h(e){var t=e.keyCode||e.which;13==t&&e.preventDefault(),/^(9|13|27)$/.test(t)&&(e.stopPropagation(),b(B,!0))}function f(){var e=k.closest(":visible").children(":hidden"),t=$.options.maxHeight;e.addClass($.classes.tempshow);var s=k.outerWidth(),o=D.outerWidth()-(s-k.width());!$.options.expandToItemText||o>s?W=o:(k.css("overflow","scroll"),I.width(9e4),W=k.width(),k.css("overflow",""),I.width("")),k.width(W).height()>t&&k.height(t),e.removeClass($.classes.tempshow)}function v(s){a.triggerCallback("BeforeOpen",$),s&&(s.preventDefault(),s.stopPropagation()),Y&&(f(),e("."+$.classes.hideselect,"."+$.classes.open).children()[t]("close"),R=!0,H=k.outerHeight(),M=k.height(),C.val("").is(":focus")||C.focus(),l.on("click"+o,g).on("scroll"+o,m),m(),$.options.preventWindowScroll&&l.on("mousewheel"+o+" DOMMouseScroll"+o,"."+$.classes.scroll,function(t){var s=t.originalEvent,o=e(this).scrollTop(),i=0;"detail"in s&&(i=-1*s.detail),"wheelDelta"in s&&(i=s.wheelDelta),"wheelDeltaY"in s&&(i=s.wheelDeltaY),"deltaY"in s&&(i=-1*s.deltaY),(o==this.scrollHeight-M&&0>i||0==o&&i>0)&&t.preventDefault()}),I.addClass($.classes.open),w(B),a.triggerCallback("Open",$))}function m(){f(),I.toggleClass($.classes.above,I.offset().top+I.outerHeight()+H>r.scrollTop()+r.height())}function g(){if(a.triggerCallback("BeforeClose",$),S!=B){a.triggerCallback("BeforeChange",$);var t=$.items[B].text;F.prop("selectedIndex",S=B).data("value",t);var s=$.options.optionsTextBuilder,i=t;i=a.format("{1}",e.isFunction(s)?s(i):a.format(s,i)),y.html(i),a.triggerCallback("Change",$)}l.off(o),I.removeClass($.classes.open),R=!1,a.triggerCallback("Close",$)}function b(e,t){$.items[B=e].disabled||(O.removeClass("selected").eq(e).addClass("selected"),w(e),t&&g())}function w(e){var t=O.eq(e).outerHeight(),s=O[e].offsetTop,o=T.scrollTop(),i=s+2*t;T.scrollTop(i>o+H?i-H:o>s-t?s-t:o)}function x(e){Y&&(k.add(D).add(C).remove(),!e&&F.removeData(t).removeData("value"),F.prop("tabindex",L).off(o).off(A).unwrap().unwrap(),Y=!1)}var C,k,T,D,y,I,O,B,S,H,M,W,E,A,$=this,F=e(n),R=!1,Y=!1,j=/android|ip(hone|od|ad)/i.test(navigator.userAgent),L=F.prop("tabindex");d(c)};e.fn[t]=function(s){return this.each(function(){var o=e.data(this,t);o&&!o.disableOnMobile?""+s===s&&o[s]?o[s]():o.init(s):e.data(this,t,new c(this,s))})},e.fn[t].hooks=n}(jQuery);